@page "/races"
@using StageRaceFantasy.Shared.Models
@inject HttpClient Http

<h1>Races</h1>

@if (races == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <MatTable
              Items="@races"
              FilterByColumnName="Name"
              ShowPaging="false"
              Striped="true">
        <MatTableHeader>
            <th>Id</th>
            <th>Name</th>
            <th></th>
        </MatTableHeader>
        <MatTableRow>
            <td>@context.Id</td>
            <td>@context.Name</td>
            <td><MatButton Link=@($"races/{context.Id}/entries")>Entries</MatButton></td>
        </MatTableRow>
    </MatTable>
}

@code {
    private Race[] races;

    protected override async Task OnInitializedAsync()
    {
        races = await Http.GetFromJsonAsync<Race[]>("api/races");
    }
}
